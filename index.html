<html>
    <head>
        <script>
var mainDiv = document.registerElement('main-div');
var contentDiv = document.registerElement('content-div');
/* squareType="I(nit),F(lag),S(afe),D(ead),W(rong),R(ight),U(nfound),1,2,3,4..." */
var subSquare = document.registerElement('sub-square', class extends HTMLElement {
    //createdCallback() {};
    attachedCallback() {
        this.shadow = this.createShadowRoot();
        this.setAttribute("square-type","I");
    };
    //detachedCallback() {};
    attributeChangedCallback(attr, oldVal, newVal) {
        if(attr=="square-type"){
            this.shadow.innerHTML = "";
            var squareType = "";
            this.innerHTML = newVal;
            switch(newVal){
                case "I":
                    squareType="sub-init";
                    break;
                case "F":
                    squareType="sub-flag";
                    break;
                case "S":
                    squareType="sub-safe";
                    break;
                case "D":
                    squareType="sub-dead";
                    break;
                case "W":
                    squareType="sub-wrong";
                    break;
                case "R":
                    squareType="sub-right";
                    break;
                case "U":
                    squareType="sub-unfound";
                    break;
                default:
                    squareType="sub-others";
            };
            this.shadow.appendChild(
                document.importNode(
                    document.getElementById(squareType).content,
                    true
                )
            );

        };
    };
});

class MineSweeper {
    constructor(element,w=10,h=10){
        this.w = w;
        this.h = h;
        for(var i=0;i<this.h;i++){
            for(var j=0;j<this.w;j++){
                var temp = new subSquare();
                temp.id = `sub-${i}-${j}`;
                element.appendChild(temp);
            }
            element.appendChild(document.createElement("br"))
        }
    }
};

        </script>
    </head>
    <body>

        <!-- squareType="I(nit),F(lag),S(afe),D(ead),W(rong),R(ight),U(nfound),1,2,3,4..." -->
        <template id="sub-init">
            <span><svg width="20px" height="20px" xmlns="http://www.w3.org/2000/svg" version="1.1">
                           <rect width="20" height="20"
                             style="fill:rgb(255,250,250);
                             stroke-width:1;
                             stroke:rgb(0,0,0)"/>
                     </svg></span>
        </template>

        <template id="sub-flag">
            <span> flag </span>
        </template>

        <template id="sub-safe">
            <div> safe </div>
        </template>

        <template id="sub-dead">
            <span><svg width="20px" height="20px" xmlns="http://www.w3.org/2000/svg" version="1.1">
                       <path d="M 0 0 l 20 0" stroke="black" stroke-width='1' fill="rgb(255,250,250)" />
                       <path d="M 0 0 l 0 20" stroke="black" stroke-width='1' fill="rgb(255,250,250)" />
                       <path d="M 0 20 l 20 0" stroke="black" stroke-width='1' fill="rgb(255,250,250)" />
                       <path d="M 20 0 l 0 20" stroke="black" stroke-width='1' fill="rgb(255,250,250)" />
                       <path d="M 0 0 l 5 5 l 0 10 l -5 5" stroke="black" stroke-width='1' fill="rgb(255,250,250)" />
                       <path d="M 5 5 l 10 0 l 5 -5" stroke="black" stroke-width='1' fill="rgb(255,250,250)" />
                       <path d="M 5 15 l 10 0 l 5 5" stroke="black" stroke-width='1' fill="rgb(255,250,250)" />
                       <path d="M 15 15 l 0 -10" stroke="black" stroke-width='1' fill="rgb(255,250,250)" /></span>
        </template>

        <template id="sub-wrong">
            <div> wrong </div>
        </template>

        <template id="sub-right">
            <div> right </div>
        </template>

        <template id="sub-unfound">
            <div> unfound </div>
        </template>

        <template id="sub-others">
            <div> others:<content/> </div>
        </template>

        <main-div>
            <content-div id="contentDiv">
            </content-div>
        </main-div>

        <script>
var game = new MineSweeper(document.getElementById('contentDiv'));
        </script>
    </body>
</html>
